/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/adapterjs@0.15.4/Gruntfile.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
module.exports=function(e){e.loadNpmTasks("grunt-contrib-clean"),e.loadNpmTasks("grunt-contrib-copy"),e.loadNpmTasks("grunt-contrib-concat"),e.loadNpmTasks("grunt-contrib-jshint"),e.loadNpmTasks("grunt-contrib-uglify"),e.loadNpmTasks("grunt-contrib-compress"),e.loadNpmTasks("grunt-contrib-yuidoc"),e.loadNpmTasks("grunt-replace"),e.loadNpmTasks("grunt-include-replace"),e.loadNpmTasks("grunt-karma"),e.loadNpmTasks("grunt-string-replace"),e.initConfig({pkg:e.file.readJSON("package.json"),base:e.config("base")||e.option("base")||process.cwd(),source:"source",production:"publish",bamboo:"bamboo",pluginInfoRoot:e.option("pluginInfoRoot")||"<%= source %>",pluginInfoFile:e.option("pluginInfoFile")||"pluginInfo.js",version:"<%= pkg.version %>",clean:{production:["<%= production %>/"],bamboo:["<%= bamboo %>/"],test:["tests/gen/*","tests/results/*"]},copy:{bamboo:{files:[{expand:!0,cwd:"<%= production %>/",src:["**"],dest:"<%= bamboo %>/adapterjs/<%= pkg.version %>"},{expand:!0,cwd:"<%= production %>/",src:["**"],dest:"<%= bamboo %>/adapterjs/<%= pkg.version_major %>.<%= pkg.version_minor %>.x"},{expand:!0,cwd:"<%= production %>/",src:["**"],dest:"<%= bamboo %>/adapterjs/latest"}]}},uglify:{options:{mangle:!1,drop_console:!0,compress:{drop_console:!0},banner:'/*! <%= pkg.name %> - v<%= version %> - <%= grunt.template.today("yyyy-mm-dd") %> */\n'},production:{files:{"<%= production %>/adapter.min.js":["<%= production %>/adapter.debug.js"]}},screenshare:{files:{"<%= production %>/adapter.screenshare.min.js":["<%= production %>/adapter.screenshare.js"]}}},concat:{options:{separator:"\n",stripBanners:!1,banner:'/*! <%= pkg.name %> - v<%= version %> - <%= grunt.template.today("yyyy-mm-dd") %> */\n\n'},production:{src:["<%= source %>/adapter.js"],dest:"<%= production %>/adapter.debug.js"},screenshare:{src:["<%= source %>/adapter.js","<%= source %>/adapter.screenshare.js"],dest:"<%= production %>/adapter.screenshare.js"}},replace:{production:{options:{variables:{version:"<%= version %>"},prefix:"@@"},files:[{expand:!0,flatten:!0,src:["<%= production %>/*.js"],dest:"<%= production %>/"}]}},includereplace:{withGoogle:{options:{prefix:"@Goo@",includesDir:".",processIncludeContents:function(o,r,n){return-1!==n.indexOf(e.config.get("googleAdapterPath"))?o.replace(/if \(typeof module \!\=\= 'undefined'\) \{(.|\n)*\}\n/gm,(function(e){return"/* Orginal exports removed in favor of AdapterJS custom export.\n"+e+"*/\n"})).replace(/.*\n/g,(function(e){return"  "+e})):o}},src:["<%= production %>/*.js"],dest:"./"},withPluginInfo:{options:{prefix:"@Tem@",includesDir:"<%= pluginInfoRoot %>/"},src:["<%= production %>/*.js"],dest:"./"}},jshint:{build:{options:e.util._.merge({node:!0},e.file.readJSON(".jshintrc")),src:["package.json","Gruntfile.js"]},tests:{options:e.util._.merge({node:!0},e.file.readJSON(".jshintrc")),src:["tests/*.js","tests/unit/*.js"]},app:{options:e.util._.merge({browser:!0,devel:!0,globals:{require:!0,define:!0}},e.file.readJSON(".jshintrc")),src:["<%= source %>/*.js"]}},compress:{bamboo:{options:{mode:"gzip"},expand:!0,cwd:"bamboo/adapterjs",src:["**/*.js"],dest:"bamboo/adapterjsgz/"}},yuidoc:{doc:{name:"<%= pkg.name %>",description:"<%= pkg.description %>",version:"<%= version %>",url:"<%= pkg.homepage %>",options:{paths:"source/",outdir:"doc/"}}},karma:{unit:{configFile:"tests/karma.conf.js",browsers:["ChromeCustom","Safari","FirefoxCustom","IE"]}},"string-replace":{dist:{files:{"publish/":"publish/*.js"},options:{replacements:[{pattern:/\(require,/gi,replacement:"(requirecopy,"},{pattern:/require\(/gi,replacement:"requirecopy("}]}}}}),e.registerTask("versionise","Adds version meta intormation",(function(){var o=this.async(),r=[];e.util.spawn({cmd:"git",args:["log","-1","--pretty=format:%h\n %ci"]},(function(n,i){if(n)return o(!1);r=i.toString().split("\n "),e.config("meta.rev",r[0]),e.config("meta.date",r[1])}));try{var n=e.config("pkg.version").match("^([0-9]+).([0-9]+).([0-9]+)$");e.config("pkg.version_major",n[1]),e.config("pkg.version_minor",n[2]),e.config("pkg.version_release",n[3])}catch(o){e.fatal("Version "+e.config("pkg.version")+" has not the correct format.")}e.util.spawn({cmd:"git",args:["for-each-ref","--sort=*authordate",'--format="%(tag)"',"refs/tags"]},(function(n,i){if(n)return o(!1);var s=(r=i.toString().split("\n"))[r.length-1];s=s.toString(),e.config("meta.tag",s),e.log.write("Version: "+e.config("<%= version %>")+"\nRevision: "+e.config("meta.rev")+"\nDate: "+e.config("meta.date")+"\nGit Tag: "+e.config("meta.tag")+"\n"),o(i)}))})),e.registerTask("bamboovars","Write bamboo variables to file",(function(){e.file.write("bamboo/vars","version="+e.config("pkg.version")+"\nversion_major="+e.config("pkg.version_major")+"\nversion_minor="+e.config("pkg.version_minor")+"\nversion_release="+e.config("pkg.version_release")),e.log.writeln("bamboo/vars file successfully created")})),e.registerTask("CheckPluginInfo","Checks for existing config file",(function(){var o=e.config.get("pluginInfoRoot")+"/"+e.config.get("pluginInfoFile");e.verbose.writeln("Checking that the plugin info file exists."),e.verbose.writeln("Privided Path : "+o),e.file.exists(o)?e.log.oklns("Plugin info file found."):e.fail.fatal("Plugin info file does not exist : "+o)})),e.registerTask("webrtc-adapter","Build the webrtc-adapter submodule",(function(){e.verbose.writeln("Spawning child process to compile webrtc-adapter subgrunt.");var o=this.async();e.util.spawn({grunt:!0,args:["--gruntfile","./third_party/adapter/Gruntfile.js","build"],opts:{stdio:"inherit"}},(function(e,o){})).on("close",(function(e){o(0===e)}))})),e.registerTask("publish",["CheckPluginInfo","versionise","clean:production","concat","replace","includereplace","string-replace","uglify","yuidoc"]),e.registerTask("bamboo",["publish","clean:bamboo","copy","compress","bamboovars"]),e.registerTask("test",["publish","karma"])};
//# sourceMappingURL=/sm/b53d0a03e49194e778775375ab7ebcfbff632f9321826a02007b7072d8580b3e.map
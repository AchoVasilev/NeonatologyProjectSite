/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/adapterjs@0.15.4/source/adapter.screenshare.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
AdapterJS.TEXT.EXTENSION={REQUIRE_INSTALLATION_FF:"To enable screensharing you need to install the Skylink WebRTC tools Firefox Add-on.",REQUIRE_INSTALLATION_CHROME:"To enable screensharing you need to install the Skylink WebRTC tools Chrome Extension.",REQUIRE_REFRESH:"Please refresh this page after the Skylink WebRTC tools extension has been installed.",BUTTON_FF:"Install Now",BUTTON_CHROME:"Go to Chrome Web Store"},AdapterJS.extensionInfo=AdapterJS.extensionInfo||{chrome:{extensionId:"ljckddiekopnnjoeaiofddfhgnbdoafc",extensionLink:"https://chrome.google.com/webstore/detail/skylink-webrtc-tools/ljckddiekopnnjoeaiofddfhgnbdoafc",iframeLink:"https://cdn.temasys.com.sg/skylink/extensions/detectRTC.html"},firefox:{extensionLink:"https://addons.mozilla.org/en-US/firefox/addon/skylink-webrtc-tools/"},opera:{extensionId:null,extensionLink:null}},AdapterJS._mediaSourcePolyfillIsDefined=!1,AdapterJS._defineMediaSourcePolyfill=function(){if(!AdapterJS._mediaSourcePolyfillIsDefined){AdapterJS._mediaSourcePolyfillIsDefined=!0;var e=null,r=function(e){if(null===e||"object"!=typeof e)return e;var r=e.constructor();for(var o in e)e.hasOwnProperty(o)&&(r[o]=e[o]);return r},o=function(e,r,o){if(!e||"object"!=typeof e)throw new Error("GetUserMedia: (constraints, .., ..) argument required");if("function"!=typeof r)throw new Error("GetUserMedia: (.., successCb, ..) argument required");if("function"!=typeof o)throw new Error("GetUserMedia: (.., .., failureCb) argument required")};if("moz"===AdapterJS.webrtcDetectedType)e=window.navigator.getUserMedia,navigator.getUserMedia=function(i,n,t){if(o(i,n,t),i.video&&"object"==typeof i.video&&i.video.hasOwnProperty("mediaSource")){var d=r(i),a=["screen","window","application","browser","camera"],s=["NotAllowedError","PermissionDeniedError","SecurityError"];if(Array.isArray(d.video.mediaSource)){for(var c=0;c<d.video.mediaSource.length;){if(a.indexOf(d.video.mediaSource[c])>-1){d.video.mediaSource=d.video.mediaSource[c];break}c++}d.video.mediaSource="string"==typeof d.video.mediaSource?d.video.mediaSource:null}if(-1===a.indexOf(d.video.mediaSource))return void t(new Error('GetUserMedia: Only "screen" and "window" are supported as mediaSource constraints'));var u=setInterval((function(){"complete"===document.readyState&&(clearInterval(u),d.video.mozMediaSource=d.video.mediaSource,e(d,n,(function(e){s.indexOf(e.name)>-1&&AdapterJS.webrtcDetectedVersion<52&&"https:"===window.parent.location.protocol?AdapterJS.renderNotificationBar(AdapterJS.TEXT.EXTENSION.REQUIRE_INSTALLATION_FF,AdapterJS.TEXT.EXTENSION.BUTTON_FF,(function(e){window.open(AdapterJS.extensionInfo.firefox.extensionLink,"_blank"),e.target&&e.target.parentElement&&e.target.nextElementSibling&&e.target.nextElementSibling.click&&e.target.nextElementSibling.click(),AdapterJS.renderNotificationBar(AdapterJS.TEXT.EXTENSION?AdapterJS.TEXT.EXTENSION.REQUIRE_REFRESH:AdapterJS.TEXT.REFRESH.REQUIRE_REFRESH,AdapterJS.TEXT.REFRESH.BUTTON,(function(){window.open("javascript:location.reload()","_top")}))})):t(e)})))}),1)}else e(i,n,t)},AdapterJS.getUserMedia=window.getUserMedia=navigator.getUserMedia;else if("webkit"===AdapterJS.webrtcDetectedType){e=window.navigator.getUserMedia;var i=document.createElement("iframe");if(navigator.getUserMedia=function(n,t,d){if(o(n,t,d),n.video&&"object"==typeof n.video&&n.video.hasOwnProperty("mediaSource")){var a=r(n),s=["window","screen","tab","audio"];if(navigator.userAgent.toLowerCase().indexOf("android")>-1)return void((Array.isArray(a.video.mediaSource)?a.video.mediaSource.indexOf("screen")>-1:"screen"===a.video.mediaSource)?(a.video.mandatory=a.video.mandatory||{},a.video.mandatory.chromeMediaSource="screen",a.video.mandatory.maxHeight=window.screen.height,a.video.mandatory.maxWidth=window.screen.width,delete a.video.mediaSource,e(a,t,d)):d(new Error('GetUserMedia: Only "screen" are supported as mediaSource constraints for Android')));if(!("opera"===AdapterJS.webrtcDetectedBrowser?AdapterJS.extensionInfo.opera.extensionId:"chrome"===AdapterJS.webrtcDetectedBrowser))return void d(new Error("Current browser does not support screensharing"));if("string"==typeof a.video.mediaSource&&s.indexOf(a.video.mediaSource)>-1&&"audio"!==a.video.mediaSource)a.video.mediaSource=[a.video.mediaSource];else if(Array.isArray(a.video.mediaSource)){for(var c=0,u=[];c<s.length;){for(var l=0;l<a.video.mediaSource.length;)s[c]===a.video.mediaSource[l]&&u.push(a.video.mediaSource[l]),l++;c++}a.video.mediaSource=u}else a.video.mediaSource=[];if(a.video.mediaSource.indexOf("audio")>-1&&-1===a.video.mediaSource.indexOf("tab"))return void d(new Error('GetUserMedia: "audio" mediaSource must be provided with ["audio", "tab"]'));if(0===a.video.mediaSource.length)return void d(new Error('GetUserMedia: Only "screen", "window", "tab" are supported as mediaSource constraints'));a.video.mediaSource.indexOf("tab")>-1&&a.video.mediaSource.indexOf("audio")>-1&&!a.audio&&console.warn('Audio must be requested if "tab" and "audio" mediaSource constraints is requested');var m=function(r){r.success?(a.video.mandatory=a.video.mandatory||{},a.video.mandatory.chromeMediaSource="desktop",a.video.mandatory.maxWidth=window.screen.width>1920?window.screen.width:1920,a.video.mandatory.maxHeight=window.screen.height>1080?window.screen.height:1080,a.video.mandatory.chromeMediaSourceId=r.sourceId,Array.isArray(a.video.mediaSource)&&a.video.mediaSource.indexOf("tab")>-1&&a.video.mediaSource.indexOf("audio")>-1&&a.audio&&(a.audio="object"==typeof a.audio?a.audio:{},a.audio.mandatory=a.audio.mandatory||{},a.audio.mandatory.chromeMediaSource="desktop",a.audio.mandatory.chromeMediaSourceId=r.sourceId),delete a.video.mediaSource,e(a,t,d)):(r.extensionLink&&AdapterJS.renderNotificationBar(AdapterJS.TEXT.EXTENSION.REQUIRE_INSTALLATION_CHROME,AdapterJS.TEXT.EXTENSION.BUTTON_CHROME,(function(e){window.open(r.extensionLink,"_blank"),e.target&&e.target.parentElement&&e.target.nextElementSibling&&e.target.nextElementSibling.click&&e.target.nextElementSibling.click(),AdapterJS.renderNotificationBar(AdapterJS.TEXT.EXTENSION?AdapterJS.TEXT.EXTENSION.REQUIRE_REFRESH:AdapterJS.TEXT.REFRESH.REQUIRE_REFRESH,AdapterJS.TEXT.REFRESH.BUTTON,(function(){window.open("javascript:location.reload()","_top")}))})),d(r.error))};if(AdapterJS.extensionInfo.chrome.iframeLink&&"opera"!==AdapterJS.webrtcDetectedBrowser)i.getSourceId(a.video.mediaSource,m);else{var S=AdapterJS.extensionInfo["opera"===AdapterJS.webrtcDetectedBrowser?"opera":"chrome"].extensionId,p=AdapterJS.extensionInfo["opera"===AdapterJS.webrtcDetectedBrowser?"opera":"chrome"].extensionLink,f=document.createElement("img");f.src="chrome-extension://"+S+"/icon.png",f.onload=function(){chrome.runtime.sendMessage(S,{type:"get-version"},(function(e){e&&"object"==typeof e&&"send-version"===e.type?chrome.runtime.sendMessage(S,{type:"get-source",sources:a.video.mediaSource},(function(e){e&&"object"==typeof e?"send-source-error"===e.type?m({success:!1,error:new Error("Permission denied for screen retrieval")}):m({success:!0,sourceId:e.sourceId}):m({success:!1,error:new Error("Retrieval failed")})})):m({success:!1,error:new Error("Extension is disabled")})}))},f.onerror=function(){m({success:!1,error:new Error("Extension not installed"),extensionLink:p})}}}else e(n,t,d)},AdapterJS.getUserMedia=window.getUserMedia=navigator.getUserMedia,navigator.mediaDevices.getUserMedia=function(e){return new Promise((function(r,o){try{window.getUserMedia(e,r,o)}catch(e){o(e)}}))},"chrome"===AdapterJS.webrtcDetectedBrowser){var n={loaded:!1,error:!1};if(i)try{(document.body||document.documentElement).removeChild(i)}catch(e){}if(!AdapterJS.extensionInfo.chrome.iframeLink)return;i.onload=function(){n.loaded=!0},i.onerror=function(){n.error=!0},i.src=AdapterJS.extensionInfo.chrome.iframeLink,i.style.display="none";var t=function(e,r){window.addEventListener("message",(function e(o){o.data&&"object"==typeof o.data&&("not-installed"===o.data.chromeExtensionStatus?(window.removeEventListener("message",e),r({success:!1,error:new Error("Extension is not installed"),extensionLink:o.data.data||AdapterJS.extensionInfo.chrome.extensionLink})):"installed-disabled"===o.data.chromeExtensionStatus?(window.removeEventListener("message",e),r({success:!1,error:new Error("Extension is disabled")})):"PermissionDeniedError"===o.data.chromeMediaSourceId?(window.removeEventListener("message",e),r({success:!1,error:new Error("Permission denied for screen retrieval")})):o.data.chromeMediaSourceId&&"string"==typeof o.data.chromeMediaSourceId&&(window.removeEventListener("message",e),r({success:!0,sourceId:o.data.chromeMediaSourceId})))})),i.contentWindow.postMessage({captureSourceId:!0,sources:e,legacy:!0,extensionId:AdapterJS.extensionInfo.chrome.extensionId,extensionLink:AdapterJS.extensionInfo.chrome.extensionLink},"*")};i.getSourceId=function(e,r){if(n.error)r({success:!1,error:new Error("iframe is not loaded")});else if(n.loaded)t(e,r);else var o=0,i=setInterval((function(){n.loaded?(clearInterval(i),t(e,r)):50===o?(clearInterval(i),r({success:!1,error:new Error("iframe failed to load")})):o++}),100)},(document.body||document.documentElement).appendChild(i)}}else"edge"===AdapterJS.webrtcDetectedBrowser?console.warn("Edge does not support screensharing feature in getUserMedia"):"AppleWebKit"===AdapterJS.webrtcDetectedType?console.warn("Safari does not support screensharing feature in getUserMedia"):"plugin"===AdapterJS.webrtcDetectedType&&(AdapterJS.WebRTCPlugin.parseVersion=function(e){var r=e.split(".");return{major:parseInt(r[0]),minor:parseInt(r[1]),revision:parseInt(r[2])}},AdapterJS.WebRTCPlugin.isVersionGreater=function(e,r){var o=AdapterJS.WebRTCPlugin.parseVersion(e),i=AdapterJS.WebRTCPlugin.parseVersion(r);return o.major>i.major||o.major==i.major&&o.minor>i.minor||o.major==i.major&&o.minor==i.minor&&o.revision>i.revision},e=window.navigator.getUserMedia,navigator.getUserMedia=function(i,n,t){if(o(i,n,t),i.video&&"object"==typeof i.video&&i.video.hasOwnProperty("mediaSource")){var d=r(i);AdapterJS.WebRTCPlugin.callWhenPluginReady((function(){if(AdapterJS.WebRTCPlugin.plugin.HasScreensharingFeature&&AdapterJS.WebRTCPlugin.plugin.isScreensharingAvailable){if(AdapterJS.WebRTCPlugin.plugin.screensharingKeys)if(Array.isArray(d.video.mediaSource)&&d.video.mediaSource.indexOf("screen")>-1&&d.video.mediaSource.indexOf("window")>-1||d.video.mediaSource===AdapterJS.WebRTCPlugin.plugin.screensharingKey||d.video.mediaSource===AdapterJS.WebRTCPlugin.plugin.screensharingKeys.screenOrWindow)d.video.mediaSource=AdapterJS.WebRTCPlugin.plugin.screensharingKeys.screenOrWindow;else if(Array.isArray(d.video.mediaSource)&&d.video.mediaSource.indexOf("screen")>-1||"screen"===d.video.mediaSource)d.video.mediaSource=AdapterJS.WebRTCPlugin.plugin.screensharingKeys.screen;else{if(!(Array.isArray(d.video.mediaSource)&&d.video.mediaSource.indexOf("window")>-1||"window"===d.video.mediaSource))return void t(new Error('GetUserMedia: Only "screen", "window", ["screen", "window"] are supported as mediaSource constraints'));d.video.mediaSource=AdapterJS.WebRTCPlugin.plugin.screensharingKeys.window}AdapterJS.WebRTCPlugin.isVersionGreater(AdapterJS.WebRTCPlugin.plugin.VERSION,"0.8.874")||(d.video.optional=d.video.optional||[],d.video.optional.push({sourceId:d.video.mediaSource})),e(d,n,t)}else t(new Error("Your version of the WebRTC plugin does not support screensharing"))}))}else e(i,n,t)},AdapterJS.getUserMedia=getUserMedia=window.getUserMedia=navigator.getUserMedia,navigator.mediaDevices&&"undefined"!=typeof Promise&&(navigator.mediaDevices.getUserMedia=requestUserMedia))}},"function"!=typeof window.require&&AdapterJS._defineMediaSourcePolyfill();
//# sourceMappingURL=/sm/76cfe5f0a24ed0fc3f787048b6fd1acb2efc21d01a89f32a25a07eb0722fcc83.map